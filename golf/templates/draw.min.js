var canvas=document.getElementById("golfcanvas"),context=canvas.getContext("2d"),imagedata=context.createImageData(768,768),screenCol=9216,screenPal=4608,setPal=1,screenBuff=new Uint8Array(setPal+screenCol+screenPal);canvas.addEventListener("contextmenu",c=>c.preventDefault());var fPallet=[0,1,2,3,4,5,6,7];function drawHiResPixel(c,d,e){s=4*c+4*(4*(192*d));for(let f=s;f<s+4;f++)for(let c=0;4>c;c++)imagedata.data[4*f+4*(4*(192*c))]=e[0],imagedata.data[4*f+1+4*(4*(192*c))]=e[1],imagedata.data[4*f+2+4*(4*(192*c))]=e[2],imagedata.data[4*f+3+4*(4*(192*c))]=255}function drawScreen(){a=pallets[(240&screenBuff[screenCol+screenPal])/16],b=pallets[15&screenBuff[screenCol+screenPal]];for(let c=0;4>c;c++)fPallet[c]=a[c],fPallet[c+4]=b[c];for(let d=0;d<36864;d++){let e=Math.floor(3*(Math.floor(d/4)/2)),f=2*(d%4),g=d%8,h=(3<<f&screenBuff[e])>>f,c=(1<<g&screenBuff[e+(2-e%3)])>>g,i=fPallet[h+4*c];x=Math.floor(d%192),y=Math.floor(d/192),drawHiResPixel(x,y,i)}context.putImageData(imagedata,0,0)}let pallets=[[[0,0,0],[96,96,96],[144,144,144],[192,192,192]],[[64,64,64],[128,128,128],[160,160,160],[255,255,255]],[[21,3,7],[74,18,21],[174,48,49],[236,126,124]],[[48,11,14],[126,33,35],[230,63,63],[242,189,184]],[[22,6,2],[72,44,11],[220,155,35],[235,185,81]],[[47,25,7],[121,81,19],[228,170,58],[250,215,126]],[[25,21,0],[155,90,16],[210,118,20],[242,178,123]],[[2,24,12],[74,102,61],[124,153,100],[178,203,144]],[[50,76,45],[97,128,77],[151,178,122],[205,227,166]],[[7,13,17],[58,119,126],[108,225,234],[148,232,230]],[[33,66,72],[83,172,180],[128,229,232],[188,238,226]],[[7,1,26],[21,34,83],[35,66,165],[59,104,191]],[[14,18,55],[28,50,111],[47,85,165],[82,141,242]],[[21,34,83],[70,135,143],[148,227,68],[226,243,228]],[[0,48,59],[255,119,119],[255,206,150],[241,242,218]],[[0,0,0],[197,17,17],[20,58,133],[255,255,255]]];