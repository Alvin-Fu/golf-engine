var canvas=document.getElementById("golfcanvas"),context=canvas.getContext("2d"),imagedata=context.createImageData(768,768),screenCol=9216,screenPal=4608,setPal=1,screenBuff=new Uint8Array(setPal+screenCol+screenPal);canvas.addEventListener("contextmenu",c=>c.preventDefault());var fPallet=[0,1,2,3,4,5,6,7];function drawHiResPixel(c,d,e){s=4*c+4*(4*(192*d));for(let f=s;f<s+4;f++)for(let c=0;4>c;c++)imagedata.data[4*f+4*(4*(192*c))]=e[0],imagedata.data[4*f+1+4*(4*(192*c))]=e[1],imagedata.data[4*f+2+4*(4*(192*c))]=e[2],imagedata.data[4*f+3+4*(4*(192*c))]=255}function drawScreen(){a=pallets[(240&screenBuff[screenCol+screenPal])/16],b=pallets[15&screenBuff[screenCol+screenPal]];for(let c=0;4>c;c++)fPallet[c]=a[c],fPallet[c+4]=b[c];for(let d=0;d<36864;d++){let e=Math.floor(3*(Math.floor(d/4)/2)),f=2*(d%4),g=d%8,h=(3<<f&screenBuff[e])>>f,c=(1<<g&screenBuff[e+(2-e%3)])>>g,i=fPallet[h+4*c];x=Math.floor(d%192),y=Math.floor(d/192),drawHiResPixel(x,y,i)}context.putImageData(imagedata,0,0)}let pallets=[[[0,0,0],[64,64,64],[96,96,96],[128,128,128]],[[144,144,144],[160,160,160],[192,192,192],[255,255,255]],[[21,3,7],[48,11,14],[74,18,21],[126,33,35]],[[178,48,49],[230,63,63],[236,126,124],[242,189,184]],[[22,6,2],[47,25,7],[72,44,11],[121,81,19]],[[220,155,35],[228,170,58],[235,185,81],[250,215,126]],[[2,24,12],[50,76,45],[74,102,61],[97,128,77]],[[124,153,100],[151,178,122],[178,203,144],[205,227,166]],[[7,13,17],[33,66,72],[58,119,126],[83,172,180]],[[108,225,234],[128,229,232],[148,232,230],[188,238,226]],[[7,1,26],[14,18,55],[21,34,83],[28,50,111]],[[35,66,139],[47,85,165],[59,104,191],[82,141,242]],[[0,0,0],[197,17,17],[20,58,133],[255,255,255]],[[181,98,11],[241,131,14],[243,152,56],[246,178,105]],[[246,189,96],[247,237,226],[245,202,195],[132,165,157]],[[21,34,83],[70,135,143],[148,227,68],[226,243,228]]];